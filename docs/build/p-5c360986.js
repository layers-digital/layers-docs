function e(e){return e&&e.hasOwnProperty("$ref")}function t(r,n){if(n.startsWith("#/")){let a,u=n.replace("#/","").split("/"),i=u[u.length-1],c=r;for(;a=u.shift();){if(!(c&&a in c))return;c=c[a]}return e(c)?Object.assign({title:i},t(r,c.$ref)):Object.assign({title:i},c)}throw new Error("unsuporte path reference: "+n)}function r(r,n){if(n)return e(n)?t(r,n.$ref):n}function n(e,t=!1){let r=t?[e.name]:[];for(;e=e.parent;)r.unshift(e.name);return r}const a=new WeakMap;function u(e,t){if(!t)return{};if(a.has(t))return a.get(t);let n=r(e,t);n?(n.allOf&&(n=n.allOf.reduce((t,n)=>{n.hasOwnProperty("$ref")&&(n=r(e,n));const a=Object.assign({},t.properties,n.properties),i=t.required+n.required,c=Object.assign(t,u(e,n));return c.properties=a,c.required=i,c},{})),function t(n,a){try{"object"==n.type&&Object.keys(n.properties).map(i=>{switch(n.properties[i].type){case"object":a.properties[i]=t(n.properties[i],n);break;case"array":n.properties[i].items.hasOwnProperty("$ref")&&(n.properties[i].items=r(e,n.properties[i].items)),n.properties[i].items.hasOwnProperty("allOf")&&(n.properties[i].items=u(e,n.properties[i].items))}}),"array"==n.type&&(n.items.$ref&&(n.items=r(e,n.items)),n.items.allOf&&(n.items=u(e,n.items)))}catch(i){}return n}(n)):n={};try{a.set(t,n)}catch(i){}return n}function i(e,t,r="READ"){var n,a;let l=u(e,t.schema),f=null!=(n=l.example)?n:null===(a=l.examples)||void 0===a?void 0:a[0];if(!(l.readOnly&&"WRITE"==r||l.writeOnly&&"READ"==r)){if(Array.isArray(f))return f;if("object"==l.type){let n="object"==typeof f?Object.assign({},f):{};for(let a in l.properties)n[a]=i(e,{name:a,parent:t,schema:l.properties[a]},r);return n}return f||("array"==l.type?l.items.oneOf?l.items.oneOf.map(n=>i(e,{name:"[]",parent:t,schema:n},r)):[i(e,{name:"[]",parent:t,schema:l.items},r)]:function({schema:e}){var t,r,n,a,u,i,l,f;let o;try{o=Array.isArray(e.type)?e.type.map(e=>e.toLowerCase()):e.type.toLowerCase()}catch(s){}if(!o)return;if(e.default)return e.default;if("boolean"==o)return!0;if("number"==o)return((null!=(t=e.minimum)?t:1)+(null!=(r=e.maximum)?r:10))/2;if("integer"==o)return Math.round((null!=(n=e.minimum)?n:1)+(null!=(a=e.maximum)?a:10))/2;if("integer"==o)return Math.round((null!=(u=e.minimum)?u:1)+(null!=(i=e.maximum)?i:10))/2;let b=null===(l=e.format)||void 0===l?void 0:l.toLowerCase();return"string"==o?(null===(f=e.enum)||void 0===f?void 0:f[0])?e.enum[0]:"byte"==b?"U3RyaW5nIGV4ZW1wbG8=":"date-time"==b?c.toISOString():"date"==b?c.toISOString().split("T")[0]:"time"==b?c.toISOString().split("T")[1].replace("Z",""):"password"==b?"********":"email"==b?"luke@starwars.com":"uuid"==b?"2f985f64-5720-4562-b310-2c963f66afa6":"objectid"==b?"5bb2575199d7179dfe85be02":"exemplo":void 0}(t))}}let c=new Date;export{i as a,n as b,t as g,u as n};