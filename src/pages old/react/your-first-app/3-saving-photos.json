{
  "path": "/docs/react/your-first-app/3-saving-photos",
  "previousText": "Taking Photos",
  "previousUrl": "/docs/react/your-first-app/2-taking-photos",
  "nextText": "Loading Photos on Filesystem",
  "nextUrl": "/docs/react/your-first-app/4-loading-photos",
  "body": [
    "div",
    null,
    [
      "p",
      {
        "class": "intro"
      },
      "We’re now able to take multiple photos and display them in a photo gallery on the second tab of our app. These photos, however, are not currently being stored permanently, so when the app is closed, they will be lost."
    ],
    " ",
    [
      "h2",
      {
        "id": "filesystem-api"
      },
      " ",
      [
        "a",
        {
          "href": "#filesystem-api"
        },
        "Filesystem API"
      ],
      " "
    ],
    " ",
    [
      "p",
      null,
      "Fortunately, saving them to the filesystem only takes a few steps. Begin by opening the ",
      [
        "code",
        null,
        "usePhotoGallery"
      ],
      " hook (",
      [
        "code",
        null,
        "src/hooks/usePhotoGallery.ts"
      ],
      "), and get access to the ",
      [
        "code",
        null,
        "writeFile"
      ],
      " method from the ",
      [
        "code",
        null,
        "useFileSystem"
      ],
      " hook:"
    ],
    " ",
    [
      "docs-code",
      {
        "language": "typescript"
      },
      " ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token keyword"
            },
            "const"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          " deleteFile",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          " getUri",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          " readFile",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          " writeFile ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token function"
            },
            "useFilesystem"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ]
        ]
      ],
      " "
    ],
    " ",
    [
      "blockquote",
      null,
      " ",
      [
        "p",
        null,
        "We will use the ",
        [
          "code",
          null,
          "writeFile"
        ],
        " method initially, but we will use the others coming up shortly, so we'll go ahead and import them now."
      ],
      " "
    ],
    " ",
    [
      "p",
      null,
      "Next, create a couple of new functions in ",
      [
        "code",
        null,
        "usePhotoGallery"
      ],
      ":"
    ],
    " ",
    [
      "docs-code",
      {
        "language": "typescript"
      },
      " ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token keyword"
            },
            "const"
          ],
          " savePicture ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "async"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "photo",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " CameraPhoto",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          " fileName",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token builtin"
            },
            "string"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token builtin"
            },
            "Promise"
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            "<"
          ],
          "Photo",
          [
            "span",
            {
              "class": "token operator"
            },
            ">"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "const"
          ],
          " base64Data ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "await"
          ],
          " ",
          [
            "span",
            {
              "class": "token function"
            },
            "base64FromPath"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "photo",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "webPath",
          [
            "span",
            {
              "class": "token operator"
            },
            "!"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "const"
          ],
          " savedFile ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "await"
          ],
          " ",
          [
            "span",
            {
              "class": "token function"
            },
            "writeFile"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n    path",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " fileName",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n    data",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " base64Data",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n    directory",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " FilesystemDirectory",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "Data\n  ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n  ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// Use webPath to display the new image instead of base64 since it's"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token comment"
            },
            "// already loaded into memory"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "return"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n    filepath",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " fileName",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n    webviewPath",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " photo",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "webPath\n  ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ]
        ]
      ],
      " "
    ],
    " ",
    [
      "blockquote",
      null,
      " ",
      [
        "p",
        null,
        "The base64FromPath method is a helper util imported from \"@ionic/react-hooks/filesystem\". It downloads a file from the supplied path and returns a base64 representation of that file."
      ],
      " "
    ],
    " ",
    [
      "p",
      null,
      "We pass in the ",
      [
        "code",
        null,
        "cameraPhoto"
      ],
      " object, which represents the newly captured device photo, as well as the fileName, which will provide a path for the file to be stored to."
    ],
    " ",
    [
      "p",
      null,
      "Next we use the Capacitor ",
      [
        "a",
        {
          "href": "https://capacitor.ionicframework.com/docs/apis/filesystem"
        },
        "Filesystem API"
      ],
      " to save the photo to the filesystem. We start by converting the photo to base64 format, then feed the data to the Filesystem’s ",
      [
        "code",
        null,
        "writeFile"
      ],
      " function."
    ],
    " ",
    [
      "p",
      null,
      "Last, call ",
      [
        "code",
        null,
        "savePicture"
      ],
      " and pass in the cameraPhoto object and filename directly underneath the call to ",
      [
        "code",
        null,
        "setPhotos"
      ],
      " in the ",
      [
        "code",
        null,
        "takePhoto"
      ],
      " method. Here is the full method:"
    ],
    " ",
    [
      "docs-code",
      {
        "language": "typescript"
      },
      " ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token keyword"
            },
            "const"
          ],
          " ",
          [
            "span",
            {
              "class": "token function-variable function"
            },
            "takePhoto"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "async"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "=>"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "const"
          ],
          " cameraPhoto ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "await"
          ],
          " ",
          [
            "span",
            {
              "class": "token function"
            },
            "getPhoto"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n    resultType",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " CameraResultType",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "Uri",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n    source",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " CameraSource",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          "Camera",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n    quality",
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token number"
            },
            "100"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n\n  ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "const"
          ],
          " fileName ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "new"
          ],
          " ",
          [
            "span",
            {
              "class": "token class-name"
            },
            "Date"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "."
          ],
          [
            "span",
            {
              "class": "token function"
            },
            "getTime"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "+"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "'.jpeg'"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "const"
          ],
          " savedFileImage ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "await"
          ],
          " ",
          [
            "span",
            {
              "class": "token function"
            },
            "savePicture"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "cameraPhoto",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          " fileName",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token keyword"
            },
            "const"
          ],
          " newPhotos ",
          [
            "span",
            {
              "class": "token operator"
            },
            "="
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "["
          ],
          "savedFileImage",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          " ",
          [
            "span",
            {
              "class": "token operator"
            },
            "..."
          ],
          "photos",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "]"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token function"
            },
            "setPhotos"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            "("
          ],
          "newPhotos",
          [
            "span",
            {
              "class": "token punctuation"
            },
            ")"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ],
          "\n",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ";"
          ]
        ]
      ],
      " "
    ],
    " ",
    [
      "p",
      null,
      "There we go! Each time a new photo is taken, it’s now automatically saved to the filesystem."
    ]
  ],
  "title": "Saving Photos to the Filesystem",
  "headings": [
    {
      "text": "Filesystem API",
      "href": "#filesystem-api"
    }
  ],
  "pageClass": "page-react-your-first-app-3-saving-photos"
}
