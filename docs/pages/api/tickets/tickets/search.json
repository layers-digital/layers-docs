{
  "template": "api-route",
  "title": "Buscar mensagens",
  "path": "/docs/api/tickets/tickets/search",
  "body": [
    "div",
    null,
    [
      "p",
      {
        "class": "intro"
      },
      "Buscar mensagens na Layers Education"
    ]
  ],
  "serviceId": "tickets",
  "example": [
    "div",
    null,
    [
      "docs-code",
      {
        "language": "http"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token method"
            },
            [
              "span",
              {
                "class": "token get"
              },
              "GET"
            ]
          ],
          " ",
          [
            "span",
            {
              "class": "token schema"
            },
            "https://"
          ],
          "api.layers.digital",
          [
            "span",
            {
              "class": "token path"
            },
            [
              "span",
              {
                "class": "token version"
              },
              "/v1"
            ],
            "/tickets/search"
          ]
        ]
      ],
      "\n"
    ]
  ],
  "requestExample": [
    "div",
    null,
    [
      "docs-code",
      {
        "language": "json"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          "undefined"
        ]
      ],
      "\n"
    ]
  ],
  "responseExample": [
    "div",
    null,
    [
      "docs-code",
      {
        "language": "json"
      },
      "\n  ",
      [
        "pre",
        null,
        [
          "code",
          null,
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"total\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token number"
            },
            "5.5"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"hits\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "["
          ],
          "\n    ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"id\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"5bb2575199d7179dfe85be02\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"createdAt\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"2022-07-14T14:36:28.242Z\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"updatedAt\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"2022-07-14T14:36:28.242Z\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"interactedAt\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"2022-07-14T14:36:28.242Z\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"code\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token number"
            },
            "12"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"source\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"id\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"5bb2575199d7179dfe85be02\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"type\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"app\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"alias\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"exemplo\""
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"author\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"id\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"5bb2575199d7179dfe85be02\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"email\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"luke@starwars.com\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"name\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"autor@email.com\""
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"subject\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"Revisão de provas\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"subjectHistory\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "["
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"exemplo\""
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "]"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"message\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"Boa tarde! Gostaria de saber o que errei na prova de português do dia 30/06. Obrigado!\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"status\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"pending\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"statusN\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token number"
            },
            "3"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"priority\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"normal\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"finished\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token boolean"
            },
            "true"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"finishedAt\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"2022-07-14T14:36:28.242Z\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"durationTotal\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token number"
            },
            "5.5"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"durationEfective\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token number"
            },
            "5.5"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"firstReplyAt\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"2022-07-14T14:36:28.242Z\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"firstReplyDelayTotal\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token number"
            },
            "5.5"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"firstReplyDelayToalEffective\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token number"
            },
            "5.5"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"agent\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"id\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"5bb2575199d7179dfe85be02\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"name\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"Jorge Farias\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"email\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"luke@starwars.com\""
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"channel\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"id\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"5bb2575199d7179dfe85be02\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"name\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"Pedagógico\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"allowAudio\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token boolean"
            },
            "true"
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"events\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "["
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n          ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"ticketId\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"5bb2575199d7179dfe85be02\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n          ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"createdAt\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"2022-07-14T14:36:28.242Z\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n          ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"type\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"note\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n          ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"value\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"Bom dia!\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n          ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"author\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "{"
          ],
          "\n            ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"id\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"5bb2575199d7179dfe85be02\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n            ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"name\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"Joao Pedro Paulino\""
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n            ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"email\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"luke@starwars.com\""
          ],
          "\n          ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          [
            "span",
            {
              "class": "token punctuation"
            },
            ","
          ],
          "\n          ",
          [
            "span",
            {
              "class": "token property"
            },
            "\"sender\""
          ],
          [
            "span",
            {
              "class": "token operator"
            },
            ":"
          ],
          " ",
          [
            "span",
            {
              "class": "token string"
            },
            "\"exemplo\""
          ],
          "\n        ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          "\n      ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "]"
          ],
          "\n    ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ],
          "\n  ",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "]"
          ],
          "\n",
          [
            "span",
            {
              "class": "token punctuation"
            },
            "}"
          ]
        ]
      ],
      "\n"
    ]
  ],
  "responseSchema": {
    "type": "object",
    "properties": {
      "total": {
        "type": "number",
        "format": "integer",
        "description": "Número de mensagens encontradas que correspondem aos filtros"
      },
      "hits": {
        "type": "array",
        "description": "Mensagens encontradas",
        "items": {
          "title": "Ticket",
          "type": "object",
          "required": [
            "subject",
            "message",
            "channel"
          ],
          "properties": {
            "id": {
              "type": "string",
              "format": "ObjectId",
              "description": "Identificador da mensagem",
              "readOnly": true
            },
            "createdAt": {
              "type": "string",
              "format": "date-time",
              "description": "Data na qual a mensagem foi criada",
              "readOnly": true
            },
            "updatedAt": {
              "type": "string",
              "format": "date-time",
              "description": "Data da última edição da mensagem",
              "readOnly": true
            },
            "interactedAt": {
              "type": "string",
              "format": "date-time",
              "description": "Data da última interação com a mensagem",
              "readOnly": true
            },
            "code": {
              "type": "string",
              "description": "Identificador sequencial da conversa",
              "example": 12
            },
            "source": {
              "type": "object",
              "readOnly": true,
              "properties": {
                "id": {
                  "type": "string",
                  "format": "ObjectId",
                  "description": "Identificador da fonte da mensagem"
                },
                "type": {
                  "type": "string",
                  "description": "Tipo da fonte da mensagem",
                  "example": "app"
                },
                "alias": {
                  "type": "string",
                  "description": "Identificador da fonte da mensagem na comunidade"
                }
              }
            },
            "author": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "format": "ObjectId",
                  "description": "Identificador do autor da mensagem",
                  "readOnly": true
                },
                "email": {
                  "type": "string",
                  "format": "email",
                  "description": "E-mail do autor da mensagem",
                  "readOnly": true
                },
                "name": {
                  "type": "string",
                  "description": "Nome do autor da mensagem",
                  "example": "autor@email.com",
                  "readOnly": true
                }
              }
            },
            "subject": {
              "type": "string",
              "description": "Assunto da conversa",
              "example": "Revisão de provas"
            },
            "subjectHistory": {
              "type": "array",
              "readOnly": true,
              "description": "Lista de assunto que a conversa já teve",
              "items": {
                "type": "string",
                "description": "Assunto da conversa"
              }
            },
            "message": {
              "type": "string",
              "description": "Texto da mensagem",
              "example": "Boa tarde! Gostaria de saber o que errei na prova de português do dia 30/06. Obrigado!"
            },
            "status": {
              "type": "string",
              "description": "Situação da mensagem",
              "example": "pending"
            },
            "statusN": {
              "type": "number",
              "description": "Representação numérica da situação da mensagem",
              "example": 3,
              "readOnly": true
            },
            "priority": {
              "type": "string",
              "description": "Descrição do nível de prioridade da mensagem",
              "default": "normal",
              "example": "normal"
            },
            "finished": {
              "type": "boolean",
              "description": "Indica se a conversa foi encerrada"
            },
            "finishedAt": {
              "type": "string",
              "format": "date-time",
              "description": "Data e hora na qual a conversa foi fechada",
              "readOnly": true
            },
            "durationTotal": {
              "type": "number",
              "format": "integer",
              "description": "Duração total da conversa em segundos",
              "readOnly": true
            },
            "durationEfective": {
              "type": "number",
              "format": "integer",
              "description": "Duração total da conversa contando apenas horas de funcionamento do canal de atendimento",
              "readOnly": true
            },
            "firstReplyAt": {
              "type": "string",
              "format": "date-time",
              "description": "Data e hora da primeira resposta",
              "readOnly": true
            },
            "firstReplyDelayTotal": {
              "type": "number",
              "format": "integer",
              "description": "Tempo até a primeira resposta em segundos",
              "readOnly": true
            },
            "firstReplyDelayToalEffective": {
              "type": "number",
              "format": "integer",
              "description": "Tempo até a primeira resposta contanto apenas horas de funcionamento do canal de atendimento",
              "readOnly": true
            },
            "agent": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "format": "ObjectId",
                  "description": "Identificador do atendente"
                },
                "name": {
                  "type": "string",
                  "format": "ObjectId",
                  "description": "Nome do atendente",
                  "example": "Jorge Farias",
                  "readOnly": true
                },
                "email": {
                  "type": "string",
                  "format": "email",
                  "description": "E-mail do atendente",
                  "readOnly": true
                }
              }
            },
            "channel": {
              "type": "object",
              "required": [
                "id"
              ],
              "properties": {
                "id": {
                  "type": "string",
                  "format": "ObjectId",
                  "description": "Identificador do canal de atendimento"
                },
                "name": {
                  "type": "string",
                  "description": "Nome do canal de atendimento",
                  "example": "Pedagógico",
                  "readOnly": true
                },
                "allowAudio": {
                  "type": "boolean",
                  "description": "Indica se o canal de atendimento aceita receber mensagens de áudio",
                  "readOnly": true
                }
              }
            },
            "events": {
              "type": "array",
              "readOnly": true,
              "items": {
                "type": "object",
                "properties": {
                  "ticketId": {
                    "type": "string",
                    "format": "ObjectId",
                    "description": "Identificador do último ticket com o mesmo code"
                  },
                  "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Data de criação da mensagem"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "note",
                      "message"
                    ],
                    "description": "Indica se o ticket é uma mensagem ou uma nota interna"
                  },
                  "value": {
                    "type": "string",
                    "description": "Texto da mensagem",
                    "example": "Bom dia!"
                  },
                  "author": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "ObjectId",
                        "description": "Identificador do autor"
                      },
                      "name": {
                        "type": "string",
                        "description": "Nome do autor",
                        "example": "Joao Pedro Paulino"
                      },
                      "email": {
                        "type": "string",
                        "format": "email",
                        "description": "E-mail do autor da mensagem"
                      }
                    }
                  },
                  "sender": {
                    "type": "string",
                    "description": "indica quem enviou a mensagem"
                  }
                }
              }
            }
          },
          "externalDocs": {
            "description": "Entidade Ticket",
            "url": "/docs/api/tickets/ticket/object"
          }
        }
      }
    }
  },
  "route": {
    "type": "route",
    "path": "/tickets/search",
    "method": "get",
    "spec": {
      "tags": [
        "Mensagens"
      ],
      "summary": "Buscar mensagens",
      "description": "Buscar mensagens na Layers Education",
      "parameters": [
        {
          "$ref": "#/components/parameters/Community-id"
        },
        {
          "$ref": "#/components/parameters/CreatedAt"
        },
        {
          "$ref": "#/components/parameters/Status"
        },
        {
          "$ref": "#/components/parameters/Agent"
        },
        {
          "$ref": "#/components/parameters/ChannelId"
        },
        {
          "$ref": "#/components/parameters/MessageAuthorId"
        },
        {
          "$ref": "#/components/parameters/MessageAuthorName"
        },
        {
          "$ref": "#/components/parameters/MessageAuthorEmail"
        },
        {
          "$ref": "#/components/parameters/Subject"
        },
        {
          "$ref": "#/components/parameters/SourceType"
        },
        {
          "$ref": "#/components/parameters/SourceAlias"
        },
        {
          "$ref": "#/components/parameters/SourceId"
        }
      ],
      "security": [
        {
          "Bearer": []
        }
      ],
      "x-layers-permissions": [
        "ticket:agent"
      ],
      "x-layers-context": [
        "user",
        "app"
      ],
      "responses": {
        "200": {
          "description": "Mensagens",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "total": {
                    "type": "number",
                    "format": "integer",
                    "description": "Número de mensagens encontradas que correspondem aos filtros"
                  },
                  "hits": {
                    "type": "array",
                    "description": "Mensagens encontradas",
                    "items": {
                      "title": "Ticket",
                      "type": "object",
                      "required": [
                        "subject",
                        "message",
                        "channel"
                      ],
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "ObjectId",
                          "description": "Identificador da mensagem",
                          "readOnly": true
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Data na qual a mensagem foi criada",
                          "readOnly": true
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Data da última edição da mensagem",
                          "readOnly": true
                        },
                        "interactedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Data da última interação com a mensagem",
                          "readOnly": true
                        },
                        "code": {
                          "type": "string",
                          "description": "Identificador sequencial da conversa",
                          "example": 12
                        },
                        "source": {
                          "type": "object",
                          "readOnly": true,
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "ObjectId",
                              "description": "Identificador da fonte da mensagem"
                            },
                            "type": {
                              "type": "string",
                              "description": "Tipo da fonte da mensagem",
                              "example": "app"
                            },
                            "alias": {
                              "type": "string",
                              "description": "Identificador da fonte da mensagem na comunidade"
                            }
                          }
                        },
                        "author": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "ObjectId",
                              "description": "Identificador do autor da mensagem",
                              "readOnly": true
                            },
                            "email": {
                              "type": "string",
                              "format": "email",
                              "description": "E-mail do autor da mensagem",
                              "readOnly": true
                            },
                            "name": {
                              "type": "string",
                              "description": "Nome do autor da mensagem",
                              "example": "autor@email.com",
                              "readOnly": true
                            }
                          }
                        },
                        "subject": {
                          "type": "string",
                          "description": "Assunto da conversa",
                          "example": "Revisão de provas"
                        },
                        "subjectHistory": {
                          "type": "array",
                          "readOnly": true,
                          "description": "Lista de assunto que a conversa já teve",
                          "items": {
                            "type": "string",
                            "description": "Assunto da conversa"
                          }
                        },
                        "message": {
                          "type": "string",
                          "description": "Texto da mensagem",
                          "example": "Boa tarde! Gostaria de saber o que errei na prova de português do dia 30/06. Obrigado!"
                        },
                        "status": {
                          "type": "string",
                          "description": "Situação da mensagem",
                          "example": "pending"
                        },
                        "statusN": {
                          "type": "number",
                          "description": "Representação numérica da situação da mensagem",
                          "example": 3,
                          "readOnly": true
                        },
                        "priority": {
                          "type": "string",
                          "description": "Descrição do nível de prioridade da mensagem",
                          "default": "normal",
                          "example": "normal"
                        },
                        "finished": {
                          "type": "boolean",
                          "description": "Indica se a conversa foi encerrada"
                        },
                        "finishedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Data e hora na qual a conversa foi fechada",
                          "readOnly": true
                        },
                        "durationTotal": {
                          "type": "number",
                          "format": "integer",
                          "description": "Duração total da conversa em segundos",
                          "readOnly": true
                        },
                        "durationEfective": {
                          "type": "number",
                          "format": "integer",
                          "description": "Duração total da conversa contando apenas horas de funcionamento do canal de atendimento",
                          "readOnly": true
                        },
                        "firstReplyAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Data e hora da primeira resposta",
                          "readOnly": true
                        },
                        "firstReplyDelayTotal": {
                          "type": "number",
                          "format": "integer",
                          "description": "Tempo até a primeira resposta em segundos",
                          "readOnly": true
                        },
                        "firstReplyDelayToalEffective": {
                          "type": "number",
                          "format": "integer",
                          "description": "Tempo até a primeira resposta contanto apenas horas de funcionamento do canal de atendimento",
                          "readOnly": true
                        },
                        "agent": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "ObjectId",
                              "description": "Identificador do atendente"
                            },
                            "name": {
                              "type": "string",
                              "format": "ObjectId",
                              "description": "Nome do atendente",
                              "example": "Jorge Farias",
                              "readOnly": true
                            },
                            "email": {
                              "type": "string",
                              "format": "email",
                              "description": "E-mail do atendente",
                              "readOnly": true
                            }
                          }
                        },
                        "channel": {
                          "type": "object",
                          "required": [
                            "id"
                          ],
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "ObjectId",
                              "description": "Identificador do canal de atendimento"
                            },
                            "name": {
                              "type": "string",
                              "description": "Nome do canal de atendimento",
                              "example": "Pedagógico",
                              "readOnly": true
                            },
                            "allowAudio": {
                              "type": "boolean",
                              "description": "Indica se o canal de atendimento aceita receber mensagens de áudio",
                              "readOnly": true
                            }
                          }
                        },
                        "events": {
                          "type": "array",
                          "readOnly": true,
                          "items": {
                            "type": "object",
                            "properties": {
                              "ticketId": {
                                "type": "string",
                                "format": "ObjectId",
                                "description": "Identificador do último ticket com o mesmo code"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "description": "Data de criação da mensagem"
                              },
                              "type": {
                                "type": "string",
                                "enum": [
                                  "note",
                                  "message"
                                ],
                                "description": "Indica se o ticket é uma mensagem ou uma nota interna"
                              },
                              "value": {
                                "type": "string",
                                "description": "Texto da mensagem",
                                "example": "Bom dia!"
                              },
                              "author": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "ObjectId",
                                    "description": "Identificador do autor"
                                  },
                                  "name": {
                                    "type": "string",
                                    "description": "Nome do autor",
                                    "example": "Joao Pedro Paulino"
                                  },
                                  "email": {
                                    "type": "string",
                                    "format": "email",
                                    "description": "E-mail do autor da mensagem"
                                  }
                                }
                              },
                              "sender": {
                                "type": "string",
                                "description": "indica quem enviou a mensagem"
                              }
                            }
                          }
                        }
                      },
                      "externalDocs": {
                        "description": "Entidade Ticket",
                        "url": "/docs/api/tickets/ticket/object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "externalDocs": {
        "description": "Buscar mensagens",
        "url": "/docs/api/tickets/tickets/search"
      }
    },
    "tags": [
      "Mensagens"
    ],
    "summary": "Buscar mensagens"
  },
  "headings": [],
  "pageClass": "page-api-tickets-tickets-search"
}
